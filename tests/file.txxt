#############################
# HEADER
# Define variables
#############################

set $mod Mod4
set $hyp Mod3

set $mobile_monitor eDP1


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#############################
# BASIC FUNCTIONS
#############################

set $mod Mod4
set $hyp Mod3

# -----------------------------

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below. ISO 10646 = Unicode
font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1

# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, if you need a lot of unicode glyphs or
# right-to-left text rendering, you should instead use pango for rendering and
# chose a FreeType font, such as:
# font pango:DejaVu Sans Mono 10

# -----------------------------

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal --title shell

# -----------------------------

# rofi
set $rofi rofi: (r) run, (s) ssh, (w) window
bindsym $hyp+Return mode "$rofi"
set $rofi_config1 -font "snap 10" -fg "#A54242" -bg "#1D1F21"
set $rofi_config2 -hlfg "#1D1F21" -hlbg "#A54242"

bindsym $mod+d exec rofi -show run $rofi_config1 $rofi_config2; mode "default"

mode "$rofi" {
        bindsym r exec rofi -show run $rofi_config1 $rofi_config2; mode "default"
        bindsym s exec rofi -show ssh $rofi_config1 $rofi_config2; mode "default"
        bindsym w exec rofi -show window $rofi_config1 $rofi_config2; mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# -----------------------------

# reload the configuration file
bindsym $mod+Control+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Control+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+Escape exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# -----------------------------

# NOTE: kill command hasn't worked the best for me, but kill focused has

# kill command
bindsym $mod+Control+Shift+k focus parent, focus parent, focus parent, kill

# kill focused window
bindsym $mod+Shift+q kill

# -----------------------------

bindsym $mod+l exec bash ~/.wizard/i3safelock.sh


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#############################
# BASIC FUNCTIONALITY
#############################

bindsym $mod+r mode "resize"
# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}


# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen


bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right


bindsym $hyp+Shift+Left move left
bindsym $hyp+Shift+Down move down
bindsym $hyp+Shift+Up move up
bindsym $hyp+Shift+Right move right

# split in horizontal orientation
bindsym $mod+Shift+h split h

# split in vertical orientation
bindsym $mod+Shift+v split v



bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $hyp+Left focus left
bindsym $hyp+Down focus down
bindsym $hyp+Up focus up
bindsym $hyp+Right focus right
bindsym $hyp+Tab focus right
bindsym $hyp+Shift+Tab focus left


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

###############################
###### FLOATING WINDOWS
###############################


# -----------------------------

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# -----------------------------

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# -----------------------------

for_window [class="Gedit"] floating enable
for_window [title="Figure.*"] floating enable
for_window [class="Slack"] floating enable
for_window [title="shell"] floating disable
for_window [instance="^localhost.*$"] floating disable
for_window [class='mpv'] floating enable

for_window [class="^.*"] border pixel 0

# because latex was opening evince and evince was stealing focus..
# TODO: remove?
no_focus [class="Evince"]
focus_on_window_activation none


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

bindsym $hyp+Control+Right move workspace to output right
bindsym $hyp+Control+Left move workspace to output left
bindsym $hyp+Control+Up move workspace to output up
bindsym $hyp+Control+Down move workspace to output down
set $hypw1 [q]ux
set $hypw2 [w]eb
set $hypw3 [e]lb
set $hypw4 [r]es
set $hypw5 [a]xe
set $hypw6 [s]sh
set $hypw7 [d]ev
set $hypw8 [f]oo
set $hypw9 [z]oo
set $hypw10 [x]yz
set $hypw11 [c]ow
set $hypw12 [v]at


set $hypb1 q
set $hypb2 w
set $hypb3 e
set $hypb4 r
set $hypb5 a
set $hypb6 s
set $hypb7 d
set $hypb8 f
set $hypb9 z
set $hypb10 x
set $hypb11 c
set $hypb12 v


exec rename workspace 1 to $hypw1
exec rename workspace 2 to $hypw2
exec rename workspace 3 to $hypw3
exec rename workspace 4 to $hypw4
exec rename workspace 5 to $hypw5
exec rename workspace 6 to $hypw6
exec rename workspace 7 to $hypw7
exec rename workspace 8 to $hypw8
exec rename workspace 9 to $hypw9
exec rename workspace 10 to $hypw10
exec rename workspace 11 to $hypw11
exec rename workspace 12 to $hypw12


bindsym $hyp+$hypb1 workspace $hypw1
bindsym $hyp+$hypb2 workspace $hypw2
bindsym $hyp+$hypb3 workspace $hypw3
bindsym $hyp+$hypb4 workspace $hypw4
bindsym $hyp+$hypb5 workspace $hypw5
bindsym $hyp+$hypb6 workspace $hypw6
bindsym $hyp+$hypb7 workspace $hypw7
bindsym $hyp+$hypb8 workspace $hypw8
bindsym $hyp+$hypb9 workspace $hypw9
bindsym $hyp+$hypb10 workspace $hypw10
bindsym $hyp+$hypb11 workspace $hypw11
bindsym $hyp+$hypb12 workspace $hypw12


bindsym mod1+space mode "move container"



mode "move container" {
        bindsym mod1+$hypb1 move container to workspace $hypw1; mode "default"
        bindsym mod1+$hypb2 move container to workspace $hypw2; mode "default"
        bindsym mod1+$hypb3 move container to workspace $hypw3; mode "default"
        bindsym mod1+$hypb4 move container to workspace $hypw4; mode "default"
        bindsym mod1+$hypb5 move container to workspace $hypw5; mode "default"
        bindsym mod1+$hypb6 move container to workspace $hypw6; mode "default"
        bindsym mod1+$hypb7 move container to workspace $hypw7; mode "default"
        bindsym mod1+$hypb8 move container to workspace $hypw8; mode "default"
        bindsym mod1+$hypb9 move container to workspace $hypw9; mode "default"
        bindsym mod1+$hypb10 move container to workspace $hypw10; mode "default"
        bindsym mod1+$hypb11 move container to workspace $hypw11; mode "default"
        bindsym mod1+$hypb12 move container to workspace $hypw12; mode "default"        bindsym Return mode "default"
        bindsym Escape mode "default"
}

#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+



###############################
######## SCRATCHPAD STUFF
###############################

for_window [class="Spotify"]  move scratchpad
for_window [class="SPTerminal"] move scratchpad
for_window [class="SPSublime"] move scratchpad
for_window [class="Slack"] move scratchpad
for_window [class="Telegram"] move scratchpad
for_window [class="Zotero"] move scratchpad

bindsym $mod+space [class="SPTerminal"] scratchpad show
bindsym $mod+control+space exec terminator --class='SPTerminal'
bindsym $mod+n [class="Sublime_text"] scratchpad show
bindsym $mod+m [class="Spotify"] scratchpad show
bindsym $mod+s [class="Slack"] scratchpad show
bindsym $mod+z [class="Zotero"] scratchpad show
bindsym $mod+t [class="Telegram"] scratchpad show

bindsym $mod+Tab scratchpad show
bindsym $mod+Shift+Tab move scratchpad

bindsym $mod+l exec bash ~/inky_functions/i3safelock.sh


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#################################
#### FRAMELESS CHROME WINDOWS
#################################
set $inky_functions /home/brian/inky_functions
#set $make_menu $(ls -t $frameless_dir | rofi -dmenu -i)
bindsym $mod+o exec $inky_functions/handle_frameless.sh
bindsym $mod+p exec $inky_functions/handle_portmaps.sh

set $google /opt/google/chrome/google-chrome
# set $pylab https://pylab.ada.sh/tree
# set $devblog http://devblog.ada.sh
# set $inbox https://inbox.google.com
# set $ada https://ide.c9.io/braingineer/ada
# #bindsym $mod+b exec $google --app=$devblog
# #bindsym $mod+g exec $google --app=$inbox
# #bindsym $mod+Shift+a exec $google --app=$ada
# set $tv https://www.tradingview.com/chart/6YuzJKqJ/
# set $kub https://ide.c9.io/braingineer/kubera
# set $polo https://poloniex.com
# set $twitter https://twitter.com
# set $reddit https://reddit.com
# set $ada https://ide.c9.io/braingineer/ada
# set $pylab http://localhost:15252
# set $ghost https://ide.c9.io/braingineer/ghost-jstwr
# set $ghostlab http://localhost:8888

bindsym $mod+$hyp+o exec $google --app=$(zenity --entry)
bindsym $mod+Shift+o exec $google --app=$(xsel --clipboard)

# set $appmode Open Frameless t,p,k,r,a,b,g,l +x
# set $privateappmode Open Frameless t,r

# bindsym $mod+Control+a mode "$appmode"
# mode "$appmode" {
#         bindsym t exec $google --app=$tv; mode "default"
#         bindsym k exec $google --app=$kub; mode "default"
#         bindsym p exec $google --app=$polo; mode "default"
#         bindsym r exec $google --app=$reddit; mode "default"
#         bindsym a exec $google --app=$ada; mode "default"
#         bindsym b exec $google --app=$pylab; mode "default"
#         bindsym g exec $google --app=$ghost; mode "default"
#         bindsym l exec $google --app=$ghostlab; mode "default"

#         # back to normal: Enter or Escape
#         bindsym x mode "$privateappmode"
#         bindsym Return mode "default"
#         bindsym Escape mode "default"
# }

# mode "$privateappmode" {
#         bindsym t exec $google --app=$twitter --incognito; mode "default"
#         bindsym r exec $google --app=$reddit --incognito; mode "default"
#         bindsym c exec $google --app=$(zenity --entry) --incognito; mode "default"

#         # back to normal: Enter or Escape
#         bindsym x   mode "$appmode"
#         bindsym Return mode "default"
#         bindsym Escape mode "default"
# }

set $newnote subl --command open /research/write/qwerty/journal/$(date +%b_%d)_$(zenity --entry).md
bindsym $mod+Shift+n exec $newnote


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#############################
# GAP STUFF
#############################

#smart_gaps on
gaps inner 10
gaps outer 10

set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#############################
# LAYOUT FUNCTIONS
#############################

### default layout:
exec layout stacking

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+Shift+e layout stacking
bindsym $mod+Shift+r layout toggle split
bindsym $mod+Shift+t layout tabbed


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+


#######################
### aww yiss
#######################3

set $livestream
bindsym $mod+control+v exec livestreamer $(zenity --entry) best

bindsym $hyp+m exec ~/inky_functions/makediss.sh

set $FUNCTIONDIR ~/inky_functions
set $WALLPAPERDIR ~/Pictures/wallpapers




bindsym XF86AudioRaiseVolume exec "amixer -q -D pulse set Master 2%+ unmute"
bindsym $hyp+plus exec "amixer -q -D pulse set Master 2%+ unmute"

bindsym XF86AudioLowerVolume exec "amixer -q -D pulse set Master 2%- unmute"
bindsym $hyp+minus exec "amixer -q -D pulse set Master 2%- unmute"

bindsym $hyp+space exec "amixer -D pulse set Master toggle"
bindsym XF86AudioMute exec "amixer -D pulse set Master toggle"

#bindsym $mod+plus exec bash /home/brian/inky_functions/spotify_control.sh next
#bindsym $mod+minus exec bash /home/brian/inky_functions/spotify_control.sh previous
#bindsym XF86AudioPlay exec bash /home/brian/inky_functions/spotify_control.sh play-pause
#bindsym $mod+Shift+plus exec bash /home/brian/inky_functions/spotify_control.sh volume +0.1
#bindsym $mod+Shift+minus exec bash /home/brian/inky_functions/spotify_control.sh volume -0.1


#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

#############
#### BAR STUFF
############

set $statusline #7C8D25
set $background #221206

# 1 = border, 2 = background, 3 = foreground
################
set $fw1 #7C8D25
set $fw2 #7C8D25
set $fw3 #221206
################
set $iw1 #221206
set $iw2 #221206
set $iw3 #7C8D25
################
set $aw1 #7C8D25
set $aw2 #7C8D25
set $aw3 #221206
################
set $uw1 #7C8D25
set $uw2 #7C8D25
set $uw3 #221206
################

bar {
    position bottom
    font pango:DejaVu Sans Mono, Awesome 12

    status_command i3blocks -c ~/.config/i3/mobile_bottom.conf
    output $mobile_monitor
        colors {
                statusline $statusline
                background $background
                focused_workspace $fw1 $fw2 $fw3
                inactive_workspace $iw1 $iw2 $iw3
                active_workspace $aw1 $aw2 $aw3
                urgent_workspace   $uw1 $uw2 $uw3
        }

}

bar {
    workspace_buttons no
    position top
    font pango:DejaVu Sans Mono, Awesome 10
    output $mobile_monitor
    status_command i3blocks -c ~/.config/i3/mobile_top.conf
    colors {
        statusline $statusline
        background $background
        focused_workspace $fw1 $fw2 $fw3
        inactive_workspace $iw1 $iw2 $iw3
        active_workspace $aw1 $aw2 $aw3
        urgent_workspace   $uw1 $uw2 $uw3
    }
}

